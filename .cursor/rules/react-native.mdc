# React Native Development Rules

## General Guidelines

- Use TypeScript for all React Native components and files
- Follow Expo best practices and conventions
- Use `expo-router` for file-based routing in the `app/` directory
- Prefer functional components with hooks over class components
- Use `StyleSheet.create()` for component styles

## Component Structure

```typescript
import { StyleSheet } from 'react-native';
import { Flex, Text } from 'testing-twigs';

export function ComponentName() {
  return (
    <Flex style={styles.container}>
      <Text>Content</Text>
    </Flex>
  );
}

const styles = StyleSheet.create({
  container: {
    // styles
  },
});
```

## File Naming

- Components: PascalCase (e.g., `UserProfile.tsx`)
- Utilities: camelCase (e.g., `formatDate.ts`)
- Types: PascalCase (e.g., `UserTypes.ts`)
- Hooks: camelCase with `use` prefix (e.g., `useAuth.ts`)
- Stories: Match component name with `.stories.tsx` suffix

## Import Organization

```typescript
// 1. React/React Native imports
import { useState, useEffect } from 'react';
import { View, StyleSheet } from 'react-native';

// 2. Third-party libraries
import { Flex, Text, Button } from 'testing-twigs';

// 3. Local imports (use @ alias)
import { useAuth } from '@/hooks/useAuth';
import { UserType } from '@/types/User';
```

## Styling Best Practices

- Use `testing-twigs` components instead of raw React Native components when available
- Use the theme from `testing-twigs` for consistent colors, fonts, and spacing
- Apply DM Sans font variants: `DMSans_400Regular`, `DMSans_500Medium`, `DMSans_700Bold` (and italic versions)
- Avoid inline styles; use `StyleSheet.create()` or `css` prop from `testing-twigs`

## Platform-Specific Code

```typescript
import { Platform } from 'react-native';

const styles = StyleSheet.create({
  header: {
    ...Platform.select({
      ios: {
        shadowColor: '#000',
        shadowOffset: { width: 0, height: 2 },
        shadowOpacity: 0.1,
      },
      android: {
        elevation: 4,
      },
    }),
  },
});
```

## State Management

- Use React hooks (`useState`, `useEffect`, `useContext`) for local state
- Use Context API for shared state (e.g., `StorybookContext`)
- Memoize expensive computations with `useMemo` and `useCallback`

## Performance

- Use `React.memo()` for components that render frequently with same props
- Avoid anonymous functions in render methods (use `useCallback`)
- Use `FlatList` for long lists instead of `ScrollView` with `.map()`
- Optimize images with `expo-image` when possible

## Type Safety

- Always define prop types with TypeScript interfaces
- Use `React.FC<Props>` or explicit return types for components
- Avoid `any` type; use `unknown` if type is truly unknown
- Export types for component props to be reused

## Accessibility

- Add `accessibilityLabel` to interactive elements
- Use `accessibilityRole` to indicate element purpose
- Ensure sufficient color contrast
- Support dynamic font sizes

## Error Handling

- Use try-catch blocks for async operations
- Provide user feedback for errors
- Log errors in development with `console.error()` or `console.warn()`
- Handle network failures gracefully

## Testing Considerations

- Write stories for components in `src/stories/` directory
- Use Storybook controls to test different component states
- Test on both iOS and Android platforms
- Consider edge cases (empty states, loading states, error states)
